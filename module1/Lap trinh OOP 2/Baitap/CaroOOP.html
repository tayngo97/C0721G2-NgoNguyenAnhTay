<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<SCRIPT>
    // class Caro {
    //     constructor(player1, player2, width, height) {
    //         this.player1 = player1;
    //         this.player2 = player2;
    //         this.width = width;
    //         this.height = height;
    //         this.arrayOfCaro = new Array(height);
    //         this.isCheckPerson1 = true;
    //     }
    //     init() {
    //         for (let i = 0; i < this.width; i++) {
    //             this.arrayOfCaro[i] = new Array();
    //             for (let j = 0; j < this.height; j++) {
    //                 this.arrayOfCaro[i][j] = ""
    //             }
    //         }
    //     }
    //     displayCaro() {
    //         let temp = "<table border=1 cellpadding = 20> ";
    //         for (let i = 0; i < this.width; i++) {
    //             temp += "<tr>"
    //             for (let j = 0; j < this.height; j++) {
    //                 temp += "<td onclick ='changeCaro(" + i + "," + j + ")'>" + this.arrayOfCaro[i][j] + "</td>"
    //             }
    //             temp += "</tr>"
    //         }
    //         temp += "</table>"
    //         document.write(temp);
    //     }
    //     changeCaro(x, y) {
    //         if (this.arrayOfCaro[x][y] == "X" || this.arrayOfCaro[x][y] == "O") {
    //             alert("Ô bạn chọn đã có người khác chọn")
    //         } else {
    //             if (this.isCheckPerson1) {
    //                 this.arrayOfCaro[x][y] = "X";
    //                 this.checkWinner("X");
    //                 this.isCheckPerson1 = false;
    //             } else {
    //                 this.arrayOfCaro[x][y] = "O";
    //                 this.checkWinner("O");
    //                 this.isCheckPerson1 = true;
    //             }
    //
    //             document.body.innerHTML = "";
    //             this.displayCaro();
    //
    //         }
    //     }
    //     checkWinner(temp) {
    //         for (let i = 0; i < this.height; i++) {
    //             for (let j = 0; j < this.width -2; j++) {
    //                 if (this.arrayOfCaro[i][j] == temp && this.arrayOfCaro[i][j + 1] == temp && this.arrayOfCaro[i][j + 2] == temp) {
    //                    if(temp =="O") {
    //                        alert(this.player1 +" win")
    //                    } else {
    //                     alert(this.player2 +" win")
    //                    }
    //                     this.init();
    //                     this.displayCaro();
    //                 }
    //             }
    //         }
    //         // for (let i = 0; i < 3; i++) {
    //         //     for (let j = 0; j < 5; j++) {
    //         //         if (arrayOfCaro[i][j] == temp && arrayOfCaro[i + 1][j] == temp && arrayOfCaro[i + 2][j] == temp) {
    //         //             alert(temp + " win")
    //         //             init();
    //         //             displayCaro();
    //         //         }
    //         //     }
    //         //     for (let j = 0; j < 3; j++) {
    //         //         if (arrayOfCaro[i][j] == temp && arrayOfCaro[i + 1][j + 1] == temp && arrayOfCaro[i + 2][j + 2] == temp) {
    //         //             alert(temp + " win")
    //         //             init();
    //         //             displayCaro();
    //         //         }
    //         //     }
    //         //     for (let j = 2; j < 5; j++) {
    //         //         if (arrayOfCaro[i][j] == temp && arrayOfCaro[i + 1][j - 1] == temp && arrayOfCaro[i + 2][j - 2] == temp) {
    //         //             alert(temp + " win")
    //         //             init();
    //         //             displayCaro();
    //         //         }
    //         //     }
    //         // }
    //     }
    // }
    // let caro = new Caro("Hai", "A07", 10, 10);
    // caro.init();
    // caro.displayCaro();
    // function changeCaro(i, j) {
    //     caro.changeCaro(i, j);
    // }

    //  class Caro {
    //      constructor() {
    //          this.arrCaro = new Array(20);
    //          this.checkPerson1 = true;
    //      }
    //
    //      init() {
    //          for(let i = 0 ; i< this.arrCaro.length;i++) {
    //              this.arrCaro[i] = new Array(20);
    //              for(let j =0; j<this.arrCaro[i].length;j++) {
    //                this.arrCaro[i][j]=" ";
    //              }
    //          }
    //      }
    //      displayCaro() {
    //          document.body.innerHTML="";
    //          let result ="<table border='1'>"
    //          for(let i = 0 ; i< this.arrCaro.length;i++) {
    //              result += "<tr>"
    //              for(let j =0; j<this.arrCaro[i].length;j++) {
    //                  result += "<td width='40px' height='40px' onclick='change("+i+","+j+")'>"+this.arrCaro[i][j]+"</td>";
    //              }
    //              result+="</tr>"
    //          }
    //          result += "</table>";
    //          document.write(result);
    //      }
    //      changeCaro(x,y) {
    //          if(this.arrCaro[x][y] =="X"||this.arrCaro[x][y] =="O") {
    //              alert("Oo nayf ddax cos nguoi choi")
    //          } else {
    //              if (this.checkPerson1) {
    //                  this.arrCaro[x][y] = "X";
    //              } else {
    //                  this.arrCaro[x][y] = "O";
    //              }
    //              this.checkPerson1 = !this.checkPerson1;
    //              this.displayCaro();
    //          }
    //      }
    //      checkWin() {
    //
    //      }
    //  }
    //
    // let caro = new Caro();
    //  caro.init();
    //  caro.displayCaro();
    //  function change(x,y) {
    //      caro.changeCaro(x,y);
    //  }

    class Cell {
        constructor(x, y, value) {
            this.x = x; //Tạo độ theo hàng
            this.y = y; // Tạo độ theo cột
            this.value = value; //Giá trị của ô đó.
            this.color ="white";
        }

        changeValue(value) {
            this.value = value;
        }
        changeColor(color) {
            this.color = color;
        }
    }

    class Caro {
        constructor(name1, name2, width, height) {
            this.name1 = name1;
            this.name2 = name2;
            this.width = width;
            this.height = height;
            this.status = true;
        }

        init() {
            this.arrayCell = [];
            for (let i = 0; i < this.height; i++) {
                this.arrayCell[i] = [];
                for (let j = 0; j < this.width; j++) {
                    this.arrayCell[i][j] = new Cell(i,j,"  ");
                }
            }
            console.log(this.arrayCell)
        }
        displayCaro() {
            document.body.innerHTML = "";
            let display = "<table border='1'>";
            for (let i = 0; i < this.height; i++) {
                display += "<tr>"
                for (let j = 0; j < this.width; j++) {
                    display += "<td onclick='changeValue(" + i + "," + j + ")' style='width: 50px; height: 50px;text-align: center; background-color: "+this.arrayCell[i][j].color+"'>" + this.arrayCell[i][j].value + "</td>"
                }
                display += "</tr>"
            }
            display += "</table>"
            document.write(display)
        }
        changeValue(i,j) {
            if(this.arrayCell[i][j].value =="  ") {
                if(this.status) {
                    this.arrayCell[i][j].changeValue("X");
                    this.arrayCell[i][j].changeColor("red")
                    this.checkWin("X")
                } else {
                    this.arrayCell[i][j].changeValue("O");
                    this.arrayCell[i][j].changeColor("blue")
                    this.checkWin("O")
                }
                this.status = !this.status; //Đảo ngược giá trị status sau đó gán lại cho biến status
                this.displayCaro()
            }
        }
        checkWin(temp) {
            for (let i = 0; i < this.height; i++) {
                //This.width -2 để khi j+2 thì sẽ triệt tiêu và không bị lỗi underfine ở 2 vòng lặp 2 cuối cùng của j
                for (let j = 0; j < this.width-2; j++) {

                    if (this.arrayCell[i][j].value === temp && this.arrayCell[i][j + 1].value === temp && this.arrayCell[i][j + 2].value === temp) {
                        alert(temp + " thang");
                        this.init();
                        this.displayCaro();
                    }
                }
            }
            // for (let i = 0; i < this.wid; i++) {
            //     for (let j = 0; j < arr[i].length; j++) {
            //         if (arr[i][j] === temp && arr[i + 1][j] === temp && arr[i + 2][j] === temp) {
            //             alert(temp + " thang");
            //             initArray();
            //             displayTable();
            //         }
            //     }
            //     for (let j = 0; j < 3; j++) {
            //         if (arr[i][j] === temp && arr[i + 1][j + 1] === temp && arr[i + 2][j + 2] === temp) {
            //             alert(temp + " thang");
            //             initArray();
            //             displayTable();
            //         }
            //     }
            //     for (let j = 2; j < 5; j++) {
            //         if (arr[i][j] === temp & arr[i + 1][j - 1] === temp && arr[i + 2][j - 2] === temp) {
            //             alert(temp + " thang");
            //             initArray();
            //             displayTable();
            //         }
            //     }
        }
    }

    let caro = new Caro("haitt","c0721g1",10,10);
    caro.init();
    caro.displayCaro()
    function changeValue(i,j) {
        caro.changeValue(i,j);
    }
</SCRIPT>
</body>
</html>